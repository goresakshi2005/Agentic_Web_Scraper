Directory structure:
â””â”€â”€ Agentic Web Scraper/
    â”œâ”€â”€ agent_scraper.py
    â”œâ”€â”€ backend/
    â”‚   â”œâ”€â”€ db.sqlite3
    â”‚   â”œâ”€â”€ manage.py
    â”‚   â”œâ”€â”€ requirements.txt
    â”‚   â”œâ”€â”€ backend/
    â”‚   â”‚   â”œâ”€â”€ __init__.py
    â”‚   â”‚   â”œâ”€â”€ asgi.py
    â”‚   â”‚   â”œâ”€â”€ settings.py
    â”‚   â”‚   â”œâ”€â”€ urls.py
    â”‚   â”‚   â””â”€â”€ wsgi.py
    â”‚   â””â”€â”€ scraper/
    â”‚       â”œâ”€â”€ __init__.py
    â”‚       â”œâ”€â”€ admin.py
    â”‚       â”œâ”€â”€ apps.py
    â”‚       â”œâ”€â”€ models.py
    â”‚       â”œâ”€â”€ serializers.py
    â”‚       â”œâ”€â”€ tests.py
    â”‚       â”œâ”€â”€ urls.py
    â”‚       â”œâ”€â”€ views.py
    â”‚       â”œâ”€â”€ management/
    â”‚       â”‚   â””â”€â”€ commands/
    â”‚       â”‚       â””â”€â”€ cleanup_expired.py
    â”‚       â””â”€â”€ migrations/
    â”‚           â”œâ”€â”€ 0001_initial.py
    â”‚           â””â”€â”€ __init__.py
    â””â”€â”€ frontend/
        â”œâ”€â”€ README.md
        â”œâ”€â”€ eslint.config.js
        â”œâ”€â”€ index.html
        â”œâ”€â”€ package.json
        â”œâ”€â”€ vite.config.js
        â””â”€â”€ src/
            â”œâ”€â”€ App.css
            â”œâ”€â”€ App.jsx
            â”œâ”€â”€ index.css
            â”œâ”€â”€ main.jsx
            â””â”€â”€ components/
                â”œâ”€â”€ ErrorBanner.jsx
                â”œâ”€â”€ Footer.jsx
                â”œâ”€â”€ Header.jsx
                â”œâ”€â”€ Layout.jsx
                â”œâ”€â”€ LoadingOverlay.jsx
                â”œâ”€â”€ ThemeToggle.jsx
                â”œâ”€â”€ Toast.jsx
                â””â”€â”€ Tooltip.jsx

================================================
FILE: agent_scraper.py
================================================
import os
import time
import requests
from bs4 import BeautifulSoup
from duckduckgo_search import DDGS  # only import DDGS
import google.generativeai as genai
from dotenv import load_dotenv

load_dotenv()

GEMINI_API_KEY = os.getenv("GOOGLE_API_KEY")
if not GEMINI_API_KEY:
    raise ValueError("GEMINI_API_KEY not found in environment variables")

genai.configure(api_key=GEMINI_API_KEY)
model = genai.GenerativeModel('gemini-2.5-flash')

def search_duckduckgo(query, max_results=5, retries=3):
    """Return a list of URLs, with retry logic on rate limit."""
    urls = []
    for attempt in range(retries):
        try:
            with DDGS() as ddgs:
                for r in ddgs.text(query, max_results=max_results):
                    urls.append(r['href'])
            break  # success
        except Exception as e:
            error_str = str(e)
            if "Ratelimit" in error_str and attempt < retries - 1:
                wait = 2 ** (attempt + 1)  # exponential backoff: 2, 4, 8 seconds
                print(f"Rate limited. Retrying in {wait} seconds...")
                time.sleep(wait)
            else:
                print(f"DuckDuckGo search failed: {e}")
                return []
    return urls

def scrape_text(url, char_limit=5000):
    headers = {
        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'
    }
    try:
        response = requests.get(url, headers=headers, timeout=10)
        response.raise_for_status()
        soup = BeautifulSoup(response.text, 'html.parser')
        for tag in soup(['script', 'style', 'nav', 'footer', 'header', 'aside']):
            tag.decompose()
        text = soup.get_text(separator=' ', strip=True)
        return text[:char_limit]
    except Exception as e:
        print(f"Error scraping {url}: {e}")
        return ""

def get_depth_params(level):
    level = level.lower()
    if level == 'less':
        return 3, 5000, (
            "Provide a brief, high-level overview suitable for a beginner. "
            "Include only the most essential facts. Use simple language."
        )
    elif level == 'medium':
        return 10, 10000, (
            "Give a balanced summary with moderate detail. Cover the key points, "
            "main concepts, and important details. Assume the reader has basic familiarity."
        )
    elif level == 'high':
        return 15, 20000, (
            "Provide a comprehensive and in-depth explanation. Include all significant aspects, "
            "technical details, historical context, applications, and any nuances. "
            "Assume the reader wants a thorough understanding."
        )
    else:
        return 10, 10000, "Provide a clear, informative summary."

def summarize_with_gemini(text, topic, depth_instruction):
    prompt = f"""
You are an expert summarizer. Create a summary about "{topic}" based on the web content below.

Depth requirement: {depth_instruction}

Format the summary in **Markdown**. Use headings, bullet points, or bold text where appropriate to make it easy to read.

Web content:
{text}
"""
    response = model.generate_content(prompt)
    return response.text

def main():
    print("=== Agentic Web Scraper + Summarizer ===")
    topic = input("Enter a topic: ").strip()
    if not topic:
        print("No topic provided.")
        return

    depth = input("Choose depth (less/medium/high): ").strip().lower()
    if depth not in ['less', 'medium', 'high']:
        print("Invalid depth. Defaulting to 'medium'.")
        depth = 'medium'

    num_results, char_limit, instruction = get_depth_params(depth)

    print(f"\nğŸ” Searching DuckDuckGo for '{topic}' (depth: {depth})...")
    urls = search_duckduckgo(topic, max_results=num_results)
    if not urls:
        print("No search results found or search failed. Try again later.")
        return

    print(f"Found {len(urls)} pages. Scraping content (up to {char_limit} chars per page)...")
    all_text = ""
    for i, url in enumerate(urls, 1):
        print(f"  [{i}] {url}")
        page_text = scrape_text(url, char_limit=char_limit)
        if page_text:
            all_text += f"\n\n--- Content from {url} ---\n{page_text}"
        time.sleep(1)  # be polite

    if not all_text.strip():
        print("No readable content could be extracted.")
        return

    print("\nğŸ§  Sending to Gemini for summarization...")
    summary = summarize_with_gemini(all_text, topic, instruction)

    print("\n" + "="*60)
    print("ğŸ“„ SUMMARY (Markdown format)".center(60))
    print("="*60)
    print(summary)

if __name__ == "__main__":
    main()


================================================
FILE: backend/db.sqlite3
================================================
[Non-text file]


================================================
FILE: backend/manage.py
================================================
#!/usr/bin/env python
"""Django's command-line utility for administrative tasks."""
import os
import sys


def main():
    """Run administrative tasks."""
    os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'backend.settings')
    try:
        from django.core.management import execute_from_command_line
    except ImportError as exc:
        raise ImportError(
            "Couldn't import Django. Are you sure it's installed and "
            "available on your PYTHONPATH environment variable? Did you "
            "forget to activate a virtual environment?"
        ) from exc
    execute_from_command_line(sys.argv)


if __name__ == '__main__':
    main()



================================================
FILE: backend/requirements.txt
================================================
Django==5.0.6
djangorestframework==3.15.1
django-cors-headers==4.3.1
python-dotenv==1.0.1
requests==2.31.0
beautifulsoup4==4.12.3
duckduckgo-search==5.2.1
google-generativeai==0.5.4
tavily-python


================================================
FILE: backend/backend/__init__.py
================================================



================================================
FILE: backend/backend/asgi.py
================================================
"""
ASGI config for backend project.

It exposes the ASGI callable as a module-level variable named ``application``.

For more information on this file, see
https://docs.djangoproject.com/en/5.1/howto/deployment/asgi/
"""

import os

from django.core.asgi import get_asgi_application

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'backend.settings')

application = get_asgi_application()



================================================
FILE: backend/backend/settings.py
================================================
import os
from pathlib import Path
from dotenv import load_dotenv

load_dotenv()

BASE_DIR = Path(__file__).resolve().parent.parent

SECRET_KEY = 'django-insecure-your-secret-key-here'  # Change in production
DEBUG = True
ALLOWED_HOSTS = []

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'rest_framework',
    'corsheaders',
    'scraper',
]

MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'corsheaders.middleware.CorsMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
]

ROOT_URLCONF = 'backend.urls'

TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [],
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]

WSGI_APPLICATION = 'backend.wsgi.application'

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': BASE_DIR / 'db.sqlite3',
    }
}

AUTH_PASSWORD_VALIDATORS = [...]

LANGUAGE_CODE = 'en-us'
TIME_ZONE = 'UTC'
USE_I18N = True
USE_TZ = True

STATIC_URL = 'static/'
DEFAULT_AUTO_FIELD = 'django.db.models.BigAutoField'

# CORS: allow frontend (Vite default port 5173)
CORS_ALLOWED_ORIGINS = [
    "http://localhost:5173",
]

# REST Framework settings (optional)
REST_FRAMEWORK = {
    'DEFAULT_RENDERER_CLASSES': (
        'rest_framework.renderers.JSONRenderer',
    )
}


================================================
FILE: backend/backend/urls.py
================================================
from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path('admin/', admin.site.urls),
    path('api/', include('scraper.urls')),
]


================================================
FILE: backend/backend/wsgi.py
================================================
"""
WSGI config for backend project.

It exposes the WSGI callable as a module-level variable named ``application``.

For more information on this file, see
https://docs.djangoproject.com/en/5.1/howto/deployment/wsgi/
"""

import os

from django.core.wsgi import get_wsgi_application

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'backend.settings')

application = get_wsgi_application()



================================================
FILE: backend/scraper/__init__.py
================================================



================================================
FILE: backend/scraper/admin.py
================================================
from django.contrib import admin

# Register your models here.



================================================
FILE: backend/scraper/apps.py
================================================
from django.apps import AppConfig


class ScraperConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'scraper'



================================================
FILE: backend/scraper/models.py
================================================
from django.db import models

class SearchRecord(models.Model):
    DEPTH_CHOICES = [
        ('less', 'Less'),
        ('medium', 'Medium'),
        ('high', 'High'),
    ]
    topic = models.CharField(max_length=255)
    depth = models.CharField(max_length=10, choices=DEPTH_CHOICES)
    summary = models.TextField()
    created_at = models.DateTimeField(auto_now_add=True)

    class Meta:
        unique_together = ('topic', 'depth')  # one record per topic+depth

    def __str__(self):
        return f"{self.topic} ({self.depth}) - {self.created_at}"


================================================
FILE: backend/scraper/serializers.py
================================================
from rest_framework import serializers
from .models import SearchRecord

class SearchSerializer(serializers.Serializer):
    topic = serializers.CharField(max_length=255)
    depth = serializers.ChoiceField(choices=['less', 'medium', 'high'])

class SearchResultSerializer(serializers.ModelSerializer):
    class Meta:
        model = SearchRecord
        fields = ['topic', 'depth', 'summary', 'created_at']


================================================
FILE: backend/scraper/tests.py
================================================
from django.test import TestCase

# Create your tests here.



================================================
FILE: backend/scraper/urls.py
================================================
from django.urls import path
from .views import SearchView

urlpatterns = [
    path('search/', SearchView.as_view(), name='search'),
]


================================================
FILE: backend/scraper/views.py
================================================
import os
from tavily import TavilyClient
import google.generativeai as genai
from django.utils import timezone
from datetime import timedelta
from rest_framework.views import APIView
from rest_framework.response import Response
from rest_framework import status
from .models import SearchRecord
from .serializers import SearchSerializer, SearchResultSerializer
from dotenv import load_dotenv

load_dotenv()

# Initialize Clients
TAVILY_API_KEY = os.getenv("TAVILY_API_KEY")
tavily = TavilyClient(api_key=TAVILY_API_KEY)

genai.configure(api_key=os.getenv("GOOGLE_API_KEY"))
gemini_model = genai.GenerativeModel('gemini-2.5-flash')

def get_depth_params(level):
    """Map depth levels to Tavily and Gemini instructions."""
    level = level.lower()
    if level == 'less':
        return 3, "basic", "Brief, high-level overview. Essential facts only."
    elif level == 'medium':
        return 6, "advanced", "Balanced summary, moderate detail, key concepts."
    elif level == 'high':
        return 10, "advanced", "Comprehensive, technical details, historical context, and nuances."
    return 5, "basic", "Clear, informative summary."

class SearchView(APIView):
    def post(self, request):
        serializer = SearchSerializer(data=request.data)
        if not serializer.is_valid():
            return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)

        topic = serializer.validated_data['topic']
        depth = serializer.validated_data['depth']

        # 1. Check for fresh record (4 days)
        expiry_date = timezone.now() - timedelta(days=4)
        try:
            record = SearchRecord.objects.get(topic=topic, depth=depth, created_at__gte=expiry_date)
            return Response(SearchResultSerializer(record).data)
        except SearchRecord.DoesNotExist:
            pass

        # 2. Search and Scrape using Tavily
        max_results, tavily_depth, instruction = get_depth_params(depth)
        
        try:
            print(f"Ã°Å¸Å¡â‚¬ Tavily searching: {topic}")
            # include_answer=True gives a quick AI summary from Tavily
            # search_depth="advanced" is better for technical topics
            search_result = tavily.search(
                query=topic, 
                search_depth=tavily_depth, 
                max_results=max_results,
                include_raw_content=True # This replaces BeautifulSoup scraping
            )
        except Exception as e:
            return Response({"error": f"Tavily search failed: {str(e)}"}, status=status.HTTP_503_SERVICE_UNAVAILABLE)

        # 3. Process Content
        context_text = ""
        for result in search_result['results']:
            # Tavily provides clean 'content' and 'raw_content'
            content = result.get('raw_content') or result.get('content')
            context_text += f"\n\nSource: {result['url']}\nContent: {content}"

        if not context_text.strip():
            return Response({"error": "No content found for this topic."}, status=status.HTTP_404_NOT_FOUND)

        # 4. Summarize with Gemini
        prompt = f"""
        You are an expert researcher. Use the following web content to write a summary about "{topic}".
        
        Requirement: {instruction}
        Format: Markdown (use headings and bullets).
        
        Web Content:
        {context_text}
        """
        
        try:
            response = gemini_model.generate_content(prompt)
            summary = response.text
        except Exception as e:
            return Response({"error": f"AI failed: {str(e)}"}, status=status.HTTP_500_INTERNAL_SERVER_ERROR)

        # 5. Save and Return
        obj, _ = SearchRecord.objects.update_or_create(
            topic=topic, depth=depth,
            defaults={'summary': summary, 'created_at': timezone.now()}
        )

        return Response(SearchResultSerializer(obj).data, status=status.HTTP_201_CREATED)


================================================
FILE: backend/scraper/management/commands/cleanup_expired.py
================================================
from django.core.management.base import BaseCommand
from django.utils import timezone
from datetime import timedelta
from scraper.models import SearchRecord

class Command(BaseCommand):
    help = 'Delete search records older than 4 days'

    def handle(self, *args, **options):
        cutoff = timezone.now() - timedelta(days=4)
        deleted, _ = SearchRecord.objects.filter(created_at__lt=cutoff).delete()
        self.stdout.write(f"Deleted {deleted} expired records.")


================================================
FILE: backend/scraper/migrations/0001_initial.py
================================================
# Generated by Django 5.0.6 on 2026-02-21 08:49

from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='SearchRecord',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('topic', models.CharField(max_length=255)),
                ('depth', models.CharField(choices=[('less', 'Less'), ('medium', 'Medium'), ('high', 'High')], max_length=10)),
                ('summary', models.TextField()),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'unique_together': {('topic', 'depth')},
            },
        ),
    ]



================================================
FILE: backend/scraper/migrations/__init__.py
================================================



================================================
FILE: frontend/README.md
================================================
# React + Vite

This template provides a minimal setup to get React working in Vite with HMR and some ESLint rules.

Currently, two official plugins are available:

- [@vitejs/plugin-react](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react) uses [Babel](https://babeljs.io/) (or [oxc](https://oxc.rs) when used in [rolldown-vite](https://vite.dev/guide/rolldown)) for Fast Refresh
- [@vitejs/plugin-react-swc](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react-swc) uses [SWC](https://swc.rs/) for Fast Refresh

## React Compiler

The React Compiler is not enabled on this template because of its impact on dev & build performances. To add it, see [this documentation](https://react.dev/learn/react-compiler/installation).

## Expanding the ESLint configuration

If you are developing a production application, we recommend using TypeScript with type-aware lint rules enabled. Check out the [TS template](https://github.com/vitejs/vite/tree/main/packages/create-vite/template-react-ts) for information on how to integrate TypeScript and [`typescript-eslint`](https://typescript-eslint.io) in your project.



================================================
FILE: frontend/eslint.config.js
================================================
import js from '@eslint/js'
import globals from 'globals'
import reactHooks from 'eslint-plugin-react-hooks'
import reactRefresh from 'eslint-plugin-react-refresh'
import { defineConfig, globalIgnores } from 'eslint/config'

export default defineConfig([
  globalIgnores(['dist']),
  {
    files: ['**/*.{js,jsx}'],
    extends: [
      js.configs.recommended,
      reactHooks.configs.flat.recommended,
      reactRefresh.configs.vite,
    ],
    languageOptions: {
      ecmaVersion: 2020,
      globals: globals.browser,
      parserOptions: {
        ecmaVersion: 'latest',
        ecmaFeatures: { jsx: true },
        sourceType: 'module',
      },
    },
    rules: {
      'no-unused-vars': ['error', { varsIgnorePattern: '^[A-Z_]' }],
    },
  },
])



================================================
FILE: frontend/index.html
================================================
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>frontend</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>



================================================
FILE: frontend/package.json
================================================
{
  "name": "frontend",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "lint": "eslint .",
    "preview": "vite preview"
  },
  "dependencies": {
    "@tailwindcss/vite": "^4.2.0",
    "axios": "^1.13.5",
    "clsx": "^2.1.1",
    "framer-motion": "^12.34.3",
    "lucide-react": "^0.575.0",
    "react": "^19.2.0",
    "react-dom": "^19.2.0",
    "react-markdown": "^10.1.0",
    "tailwind-merge": "^3.5.0"
  },
  "devDependencies": {
    "@eslint/js": "^9.39.1",
    "@tailwindcss/typography": "^0.5.19",
    "@types/react": "^19.2.7",
    "@types/react-dom": "^19.2.3",
    "@vitejs/plugin-react": "^5.1.1",
    "autoprefixer": "^10.4.24",
    "eslint": "^9.39.1",
    "eslint-plugin-react-hooks": "^7.0.1",
    "eslint-plugin-react-refresh": "^0.4.24",
    "globals": "^16.5.0",
    "postcss": "^8.5.6",
    "tailwindcss": "^4.2.0",
    "vite": "^7.3.1"
  }
}



================================================
FILE: frontend/vite.config.js
================================================
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'
import tailwindcss from '@tailwindcss/vite' // Add this

export default defineConfig({
  plugins: [
    react(),
    tailwindcss(), // Add this
  ],
  server: {
    proxy: {
      '/api': 'http://localhost:8000'
    }
  }
})


================================================
FILE: frontend/src/App.css
================================================
/* App.css */
:root {
  --bg-dark: #0b0f1a;
  --card-bg: #161b2c;
  --accent-blue: #3b82f6;
  --accent-purple: #8b5cf6;
  --text-main: #e2e8f0;
  --sidebar-width: 260px;
}

body {
  margin: 0;
  background-color: var(--bg-dark);
  color: var(--text-main);
  font-family: 'Inter', system-ui, -apple-system, sans-serif;
}

.app-container {
  display: flex;
  min-height: 100vh;
}

/* --- SIDEBAR --- */
.sidebar {
  width: var(--sidebar-width);
  background: rgba(22, 27, 44, 0.6);
  backdrop-filter: blur(10px);
  border-right: 1px solid rgba(255, 255, 255, 0.1);
  padding: 2rem 1.5rem;
  display: flex;
  flex-direction: column;
}

.sidebar h3 {
  font-size: 0.9rem;
  color: #94a3b8;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.history-list {
  margin-top: 1.5rem;
  flex-grow: 1;
}

.history-item {
  background: rgba(255, 255, 255, 0.05);
  padding: 0.75rem 1rem;
  border-radius: 8px;
  margin-bottom: 0.75rem;
  cursor: pointer;
  transition: all 0.2s;
  border: 1px solid transparent;
  font-weight: 500;
}

.history-item:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: var(--accent-blue);
}

.clear-btn {
  background: transparent;
  color: #ef4444;
  border: 1px solid #ef444433;
  padding: 0.5rem;
  border-radius: 6px;
  font-size: 0.85rem;
  cursor: pointer;
}

/* --- MAIN CONTENT --- */
.main-content {
  flex-grow: 1;
  padding: 3rem;
  max-width: 1000px;
  margin: 0 auto;
}

.header-title {
  font-size: 3.5rem;
  font-weight: 800;
  text-align: center;
  margin-bottom: 0.5rem;
  /* GRADIENT TEXT EFFECT */
  background: linear-gradient(90deg, #4facfe 0%, #00f2fe 50%, #7062f5 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.header-subtitle {
  text-align: center;
  color: #94a3b8;
  margin-bottom: 3rem;
}

/* --- SEARCH BAR --- */
.search-container {
  background: var(--card-bg);
  padding: 0.75rem;
  border-radius: 16px;
  display: flex;
  gap: 1rem;
  box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.3);
  border: 1px solid rgba(255, 255, 255, 0.05);
  margin-bottom: 2rem;
}

.search-input-wrapper {
  flex-grow: 1;
  display: flex;
  align-items: center;
  padding-left: 1rem;
  background: rgba(0,0,0,0.2);
  border-radius: 10px;
}

.search-input-wrapper input {
  background: transparent;
  border: none;
  color: white;
  padding: 0.75rem;
  width: 100%;
  outline: none;
}

.depth-select {
  background: rgba(255, 255, 255, 0.05);
  color: white;
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 10px;
  padding: 0 1rem;
  cursor: pointer;
}

.research-btn {
  background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
  color: white;
  border: none;
  border-radius: 10px;
  padding: 0.75rem 1.5rem;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  cursor: pointer;
}

/* --- RESULTS CARD --- */
.result-card {
  background: var(--card-bg);
  border-radius: 20px;
  padding: 2.5rem;
  border: 1px solid rgba(255, 255, 255, 0.05);
  box-shadow: 0 20px 50px rgba(0,0,0,0.4);
}

.result-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 2rem;
}

.status-indicator {
  font-size: 0.85rem;
  color: #64748b;
}

.action-buttons {
  display: flex;
  gap: 0.75rem;
}

.icon-btn {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  color: #94a3b8;
  padding: 0.5rem;
  border-radius: 8px;
  cursor: pointer;
}

.markdown-body {
  line-height: 1.7;
  color: #cbd5e1;
}

.markdown-body h1, .markdown-body h2 {
  color: white;
  margin-top: 1.5rem;
}


================================================
FILE: frontend/src/App.jsx
================================================
import { useState, useEffect } from 'react';
import axios from 'axios';
import ReactMarkdown from 'react-markdown';
import { 
  Search, 
  Sparkles, 
  History, 
  Copy, 
  Download, 
  Loader2, 
  ChevronRight, 
  Trash2,
  Globe
} from 'lucide-react';
import { AnimatePresence, motion } from 'framer-motion';

function App() {
  const [topic, setTopic] = useState('');
  const [depth, setDepth] = useState('medium');
  const [summary, setSummary] = useState('');
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState('');
  const [history, setHistory] = useState([]);

  // Load history from localStorage on mount
  useEffect(() => {
    const saved = JSON.parse(localStorage.getItem('search_history') || '[]');
    setHistory(saved);
  }, []);

  const saveToHistory = (newRecord) => {
    const updated = [newRecord, ...history.filter(h => h.topic !== newRecord.topic)].slice(0, 10);
    setHistory(updated);
    localStorage.setItem('search_history', JSON.stringify(updated));
  };

  const deleteHistoryItem = (indexToDelete) => {
    const updated = history.filter((_, idx) => idx !== indexToDelete);
    setHistory(updated);
    localStorage.setItem('search_history', JSON.stringify(updated));
  };

  const handleSubmit = async (e, customTopic = null, customDepth = null) => {
    if (e) e.preventDefault();
    const activeTopic = customTopic || topic;
    const activeDepth = customDepth || depth;

    setLoading(true);
    setError('');
    
    try {
      const response = await axios.post('http://localhost:8000/api/search/', {
        topic: activeTopic,
        depth: activeDepth,
      });
      setSummary(response.data.summary);
      saveToHistory({ topic: activeTopic, depth: activeDepth, summary: response.data.summary });
    } catch (err) {
      setError(err.response?.data?.error || 'The research agent encountered an error.');
    } finally {
      setLoading(false);
    }
  };

  const copyToClipboard = () => {
    navigator.clipboard.writeText(summary);
    alert('Summary copied to clipboard!');
  };

  return (
    <div className="min-h-screen bg-slate-50 dark:bg-slate-950 text-slate-900 dark:text-slate-100 transition-colors duration-300">
      {/* Container with max width and auto margins to center */}
      <div className="max-w-7xl mx-auto px-4 py-8 grid grid-cols-1 lg:grid-cols-12 gap-8">
        
        {/* SIDEBAR: History (3/12 = 25% on large screens) */}
        <aside className="lg:col-span-3 space-y-4">
          <div className="bg-white dark:bg-slate-900 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800">
            <h2 className="flex items-center gap-2 font-bold mb-4 text-slate-600 dark:text-slate-400">
              <History size={18} /> Recent Research
            </h2>
            <div className="space-y-2">
              {history.length === 0 && <p className="text-sm text-slate-400 italic">No recent searches</p>}
              {history.map((item, idx) => (
                <div key={idx} className="flex items-center justify-between group">
                  <button
                    onClick={() => {
                      setTopic(item.topic);
                      setDepth(item.depth);
                      handleSubmit(null, item.topic, item.depth);
                    }}
                    className="flex-1 text-left p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors text-sm truncate"
                  >
                    {item.topic}
                  </button>
                  <button
                    onClick={(e) => {
                      e.stopPropagation();
                      deleteHistoryItem(idx);
                    }}
                    className="p-1 text-slate-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity"
                    aria-label="Delete from history"
                  >
                    <Trash2 size={14} />
                  </button>
                </div>
              ))}
              {history.length > 0 && (
                <button 
                  onClick={() => {setHistory([]); localStorage.removeItem('search_history')}}
                  className="mt-4 flex items-center gap-1 text-xs text-red-500 hover:text-red-600"
                >
                  <Trash2 size={12} /> Clear History
                </button>
              )}
            </div>
          </div>
        </aside>

        {/* MAIN: Search & Content (9/12 = 75% on large screens) */}
        <main className="lg:col-span-9 space-y-6">
          {/* Hero Header */}
          <header className="text-center mb-10">
            <h1 className="text-3xl sm:text-4xl font-extrabold tracking-tight bg-gradient-to-r from-blue-600 to-indigo-500 bg-clip-text text-transparent mb-2 leading-tight">
              Agentic Insight Scraper
            </h1>
            <p className="text-slate-500 dark:text-slate-400">
              Deep web research & summarization powered by Tavily + Gemini
            </p>
          </header>

          {/* Search Card */}
          <div className="bg-white dark:bg-slate-900 p-6 rounded-3xl shadow-xl shadow-blue-500/5 border border-slate-200 dark:border-slate-800">
            <form onSubmit={handleSubmit} className="space-y-4">
              <div className="flex flex-col md:flex-row gap-4">
                <div className="relative flex-1">
                  <Search className="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400" size={20} />
                  <input
                    type="text"
                    placeholder="What would you like to research today?"
                    value={topic}
                    onChange={(e) => setTopic(e.target.value)}
                    className="w-full pl-10 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 focus:ring-2 focus:ring-blue-500 outline-none transition-all"
                    required
                  />
                </div>
                <div className="md:w-48">
                  <select 
                    value={depth} 
                    onChange={(e) => setDepth(e.target.value)}
                    className="w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 focus:ring-2 focus:ring-blue-500 outline-none"
                  >
                    <option value="less">Quick Overview</option>
                    <option value="medium">Standard Depth</option>
                    <option value="high">Deep Technical</option>
                  </select>
                </div>
                <button
                  type="submit"
                  disabled={loading}
                  className="px-8 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-bold rounded-xl transition-all flex items-center justify-center gap-2 shadow-lg shadow-blue-500/25"
                >
                  {loading ? <Loader2 className="animate-spin" /> : <Sparkles size={20} />}
                  {loading ? 'Analyzing...' : 'Research'}
                </button>
              </div>
            </form>
          </div>

          {/* Error Message */}
          <AnimatePresence>
            {error && (
              <motion.div 
                initial={{ opacity: 0, y: 10 }}
                animate={{ opacity: 1, y: 0 }}
                exit={{ opacity: 0 }}
                className="p-4 bg-red-50 dark:bg-red-950/30 border border-red-200 dark:border-red-900 text-red-600 rounded-xl text-sm"
              >
                âŒ {error}
              </motion.div>
            )}
          </AnimatePresence>

          {/* Results Area */}
          <div className="relative min-h-[400px]">
            {loading ? (
              <div className="space-y-4 animate-pulse">
                <div className="h-8 bg-slate-200 dark:bg-slate-800 rounded w-1/3"></div>
                <div className="h-4 bg-slate-200 dark:bg-slate-800 rounded w-full"></div>
                <div className="h-4 bg-slate-200 dark:bg-slate-800 rounded w-5/6"></div>
                <div className="h-4 bg-slate-200 dark:bg-slate-800 rounded w-full"></div>
                <div className="grid grid-cols-3 gap-4 py-4">
                  <div className="h-20 bg-slate-200 dark:bg-slate-800 rounded"></div>
                  <div className="h-20 bg-slate-200 dark:bg-slate-800 rounded"></div>
                  <div className="h-20 bg-slate-200 dark:bg-slate-800 rounded"></div>
                </div>
              </div>
            ) : summary ? (
              <motion.div 
                initial={{ opacity: 0 }}
                animate={{ opacity: 1 }}
                className="bg-white dark:bg-slate-900 p-8 rounded-3xl shadow-sm border border-slate-200 dark:border-slate-800"
              >
                <div className="flex justify-between items-start mb-6 border-b border-slate-100 dark:border-slate-800 pb-4">
                  <div>
                    <h2 className="text-2xl font-bold text-slate-800 dark:text-slate-100">Research Results</h2>
                    <p className="text-sm text-slate-500 capitalize">{depth} intensity scan complete</p>
                  </div>
                  <div className="flex gap-2">
                    <button 
                      onClick={copyToClipboard}
                      className="p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg text-slate-500 transition-colors"
                      title="Copy to Clipboard"
                    >
                      <Copy size={20} />
                    </button>
                    <button 
                      onClick={() => window.print()}
                      className="p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg text-slate-500 transition-colors"
                      title="Download PDF"
                    >
                      <Download size={20} />
                    </button>
                  </div>
                </div>

                <article className="prose prose-slate dark:prose-invert max-w-none prose-headings:font-bold prose-a:text-blue-600">
                  <ReactMarkdown>{summary}</ReactMarkdown>
                </article>

                <div className="mt-12 p-4 bg-blue-50 dark:bg-blue-950/20 rounded-2xl border border-blue-100 dark:border-blue-900/50">
                   <h3 className="flex items-center gap-2 text-sm font-semibold text-blue-700 dark:text-blue-400 mb-2">
                     <Globe size={16} /> Data Verification
                   </h3>
                   <p className="text-xs text-blue-600 dark:text-blue-400/80">
                     This summary was synthesized from multiple real-time web sources. AI models can occasionally hallucinate; please verify critical technical details.
                   </p>
                </div>
              </motion.div>
            ) : (
              <div className="h-full flex flex-col items-center justify-center text-slate-400 opacity-50 space-y-4 pt-20">
                <div className="p-6 bg-slate-100 dark:bg-slate-800 rounded-full">
                  <Search size={48} />
                </div>
                <p className="text-lg">Enter a topic to begin research</p>
              </div>
            )}
          </div>
        </main>
      </div>
    </div>
  );
}

export default App;


================================================
FILE: frontend/src/index.css
================================================
:root {
  font-family: system-ui, Avenir, Helvetica, Arial, sans-serif;
  line-height: 1.5;
  font-weight: 400;

  color-scheme: light dark;
  color: rgba(255, 255, 255, 0.87);
  background-color: #242424;

  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

a {
  font-weight: 500;
  color: #646cff;
  text-decoration: inherit;
}
a:hover {
  color: #535bf2;
}

body {
  margin: 0;
  /* Remove the flex centering that conflicts with mx-auto */
  /* display: flex; */
  /* place-items: center; */
  min-width: 320px;
  min-height: 100vh;
}

h1 {
  font-size: 3.2em;
  line-height: 1.1;
}

button {
  border-radius: 8px;
  border: 1px solid transparent;
  padding: 0.6em 1.2em;
  font-size: 1em;
  font-weight: 500;
  font-family: inherit;
  background-color: #1a1a1a;
  cursor: pointer;
  transition: border-color 0.25s;
}
button:hover {
  border-color: #646cff;
}
button:focus,
button:focus-visible {
  outline: 4px auto -webkit-focus-ring-color;
}

@media (prefers-color-scheme: light) {
  :root {
    color: #213547;
    background-color: #ffffff;
  }
  a:hover {
    color: #747bff;
  }
  button {
    background-color: #f9f9f9;
  }
}

@import "tailwindcss";
@plugin "@tailwindcss/typography";


================================================
FILE: frontend/src/main.jsx
================================================
import { StrictMode } from 'react'
import { createRoot } from 'react-dom/client'
import './index.css'
import App from './App.jsx'

createRoot(document.getElementById('root')).render(
  <StrictMode>
    <App />
  </StrictMode>,
)



================================================
FILE: frontend/src/components/ErrorBanner.jsx
================================================
import React from 'react';

export default function ErrorBanner({ message, onRetry, onClose }) {
  if (!message) return null;

  return (
    <div className="fixed left-1/2 transform -translate-x-1/2 top-6 z-50 w-[min(90%,720px)]">
      <div className="p-4 bg-red-50 dark:bg-red-900/80 border border-red-200 dark:border-red-800 text-red-700 rounded-lg shadow-md flex items-start justify-between gap-4">
        <div className="flex-1 text-sm">{message}</div>
        <div className="flex items-center gap-2">
          {onRetry && (
            <button onClick={onRetry} className="px-3 py-1 bg-white dark:bg-slate-800 rounded text-sm border">Retry</button>
          )}
          {onClose && (
            <button onClick={onClose} aria-label="Close error" className="px-2 py-1 text-sm text-red-600">Ã¢Å“â€¢</button>
          )}
        </div>
      </div>
    </div>
  );
}



================================================
FILE: frontend/src/components/Footer.jsx
================================================
import React from 'react';

export default function Footer(){
  return (
    <footer className="w-full mt-8 border-t border-slate-100 dark:border-slate-800 bg-transparent">
      <div className="max-w-7xl mx-auto px-4 py-6 text-sm text-slate-500 dark:text-slate-400 flex justify-between items-center">
        <div>Ã‚Â© {new Date().getFullYear()} Agentic Insight</div>
        <div className="flex items-center gap-4">
          <a className="hover:underline" href="#">Privacy</a>
          <a className="hover:underline" href="#">Feedback</a>
        </div>
      </div>
    </footer>
  );
}



================================================
FILE: frontend/src/components/Header.jsx
================================================
import React from 'react';
import { Sparkles } from 'lucide-react';
import ThemeToggle from './ThemeToggle';

export default function Header() {
  return (
    <header className="w-full bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800" role="banner">
      <div className="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between">
        <div className="flex items-center gap-3">
          <div className="p-2 bg-blue-600 text-white rounded-md" aria-hidden>
            <Sparkles size={18} />
          </div>
          <div>
            <h1 className="text-lg font-bold text-slate-800 dark:text-slate-100 leading-tight">Agentic Insight Scraper</h1>
            <p className="text-xs text-slate-500 dark:text-slate-400">Research automation + concise summaries</p>
          </div>
        </div>
        <nav className="text-sm text-slate-600 dark:text-slate-400 flex items-center gap-4" aria-label="Primary navigation">
          <a className="hidden sm:inline mr-4" href="#">Docs</a>
          <a className="hidden sm:inline" href="#">About</a>
          <ThemeToggle />
        </nav>
      </div>
    </header>
  );
}



================================================
FILE: frontend/src/components/Layout.jsx
================================================
import React from 'react';
import Header from './Header';
import Footer from './Footer';

export default function Layout({ children, busy = false }) {
  return (
    <div className="min-h-screen bg-slate-50 dark:bg-slate-950 text-slate-900 dark:text-slate-100 transition-colors duration-300 flex flex-col">
      <Header />
      <main role="main" aria-busy={busy} className="max-w-7xl mx-auto px-4 py-8 grid grid-cols-1 lg:grid-cols-12 gap-8 flex-1">
        {children}
      </main>
      <Footer />
    </div>
  );
}



================================================
FILE: frontend/src/components/LoadingOverlay.jsx
================================================
import React from 'react';
import { Loader2 } from 'lucide-react';

export default function LoadingOverlay({ visible, label = 'AnalyzingÃ¢â‚¬Â¦' }) {
  if (!visible) return null;

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/30" role="status" aria-live="polite" aria-label={label}>
      <div className="bg-white dark:bg-slate-900 text-slate-900 dark:text-slate-100 px-6 py-4 rounded-xl shadow-lg flex items-center gap-3">
        <Loader2 className="animate-spin" />
        <div className="text-sm font-medium">{label}</div>
      </div>
    </div>
  );
}



================================================
FILE: frontend/src/components/ThemeToggle.jsx
================================================
import React, { useEffect, useState } from 'react';
import { Sun, Moon } from 'lucide-react';

export default function ThemeToggle() {
  const [dark, setDark] = useState(() => {
    try {
      const stored = localStorage.getItem('theme');
      if (stored) return stored === 'dark';
      return window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    } catch (e) {
      return false;
    }
  });

  useEffect(() => {
    const root = document.documentElement;
    if (dark) {
      root.classList.add('dark');
      localStorage.setItem('theme', 'dark');
    } else {
      root.classList.remove('dark');
      localStorage.setItem('theme', 'light');
    }
  }, [dark]);

  return (
    <button
      aria-label={dark ? 'Switch to light theme' : 'Switch to dark theme'}
      aria-pressed={dark}
      onClick={() => setDark(d => !d)}
      className="p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-800 focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-indigo-500"
      title={dark ? 'Light mode' : 'Dark mode'}
    >
      {dark ? <Sun size={16} /> : <Moon size={16} />}
    </button>
  );
}



================================================
FILE: frontend/src/components/Toast.jsx
================================================
import React from 'react';

export default function Toast({ visible, message, type = 'info' }) {
  if (!visible) return null;

  const base = 'max-w-sm w-full px-4 py-3 rounded-lg shadow-lg border flex items-start gap-3';
  const variants = {
    info: base + ' bg-slate-50 border-slate-200 text-slate-800',
    success: base + ' bg-green-50 border-green-200 text-green-800',
    error: base + ' bg-red-50 border-red-200 text-red-800',
  };

  return (
    <div className="fixed right-4 bottom-6 z-50">
      <div className={variants[type] || variants.info} role="status" aria-live="polite">
        <div className="flex-1 text-sm leading-snug">{message}</div>
      </div>
    </div>
  );
}



================================================
FILE: frontend/src/components/Tooltip.jsx
================================================
import React from 'react';

export default function Tooltip({ children, text }) {
  return (
    <div className="relative group">
      {children}
      <span className="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 text-xs font-medium text-white bg-gray-800 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap">
        {text}
      </span>
    </div>
  );
}

